{
  "name" : "warsa_actor_persons",
  "endpointURL" : "http://ldf.fi/warsa/sparql",
  "lasLocale" : "fi",
  "queryUsingOriginalForm" : true,
  "queryUsingBaseform" : true,
  "queryUsingInflections" : [ ],
  "queryModifyingEveryPart" : true,
  "queryModifyingOnlyLastPart" : false,
  "positiveLASFilters" : {
    "" : [ null ]
  },
  "negativeLASFilters" : {
    "" : [ null ]
  },
  "strongNegativeLASFilters" : {
    "" : [ null ]
  },
  "guess" : true,
  "query" : "PREFIX text: <http://jena.apache.org/text#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\nPREFIX wacs: <http://ldf.fi/schema/warsa/actors/>\nPREFIX wsc: <http://ldf.fi/schema/warsa/>\nPREFIX crm: <http://www.cidoc-crm.org/cidoc-crm/>\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nPREFIX cas: <http://ldf.fi/schema/narc-menehtyneet1939-45/>\nPREFIX dct: <http://purl.org/dc/terms/>\n\nSELECT DISTINCT ?id ?ngram (COALESCE(?nlabel, ?plabel) AS ?label) ?first_names ?family_name (COALESCE(?hierarchy_label, 'NA') AS ?hierarchy)\n(COALESCE(?promotion_rank, 'NA') AS ?rank) (COALESCE(?rank_lvl, 0) AS ?rank_level) (COALESCE(?earliest_promotion_time, 'NA') AS ?promotion_date)\n(COALESCE(?latest_promotion_time, 'NA') AS ?latest_promotion_date) ?death_date ?source ?unit\nWHERE {\n{\n    SELECT DISTINCT ?id ?ngram {\n    VALUES ?ngram {\n        <VALUES>\n    }\n    FILTER(STRLEN(?ngram)>2)\n    BIND(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(?ngram, '\\\\.$', ''), '[áà]', 'a'), '[éè]', 'e'), '[íì]', 'i'), '[óò]', 'o'), '[úù]', 'u'), '[ýỳ]', 'y'), 'W', 'V') AS ?n_ngram)\n    BIND(\"^((?:[a-zA-ZäÄåÅöÖüÜ]\\\\.[ ]*)|(?:[a-zA-ZäÄöÖåÅüÜ-]{3,}[ ]+))((?:-?[a-zA-ZäÄåÅöÖüÜ]\\\\.[ ]*)|(?:[a-zA-ZäÄöÖåÅüÜ-]{3,}[ ]+))?((?:[a-zA-ZäÄåÅöÖüÜ]\\\\.[ ]*)|(?:[a-zA-ZäÄöÖåÅüÜ-]{3,}[ ]+))*([_a-zA-ZäÄöÖåÅüÜ-]{3,})$\" AS ?nimiregex)\n    BIND(REPLACE(REPLACE(?n_ngram, ?nimiregex, \"$4\"), \"_\", \" \") AS ?family_name)\n    BIND(REPLACE(REPLACE(?n_ngram, ?nimiregex, \"$1\"), \"^(.*?)[ ]*$\", \"$1\") AS ?ngrametu)\n    BIND(REPLACE(REPLACE(?n_ngram, ?nimiregex, \"$2\"), \"^(.*?)[ ]*$\", \"$1\") AS ?ngramkeski)\n    BIND(UCASE(?ngrametu) AS ?etu)\n    FILTER(?ngramkeski=\"\" || !(STRENDS(?ngrametu, \".\") && !STRENDS(?ngramkeski, \".\")))\n    BIND(UCASE(REPLACE(?ngramkeski, '^-', '')) AS ?keski)\n    BIND(CONCAT(REPLACE(REPLACE(?family_name, \"-\\\\s*$\", \"\"), \"-\", \"~1 \"), \"~1\") AS ?qstring)\n    BIND(REPLACE(?qstring, 'V', 'W') AS ?qstring2)\n\n    GRAPH <http://ldf.fi/warsa/persons> { { ?id text:query ?qstring . } UNION { ?id text:query ?qstring2 . } }\n    ?id foaf:familyName ?familyName_orig .\n    BIND(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(?familyName_orig, '[áà]', 'a'), '[éè]', 'e'), '[íì]', 'i'), '[óò]', 'o'), '[úù]', 'u'), '[ýỳ]', 'y'), 'W', 'V') AS ?familyName)\n    FILTER((UCASE(?family_name) = UCASE(?familyName)) || (CONTAINS(?familyName, \"(\") || CONTAINS(?familyName, \".\")) && REGEX(?familyName, CONCAT(\"^\", ?family_name, \"\\\\b\"), \"i\"))\n\n    OPTIONAL { ?id foaf:firstName ?fnames . BIND(REPLACE(REPLACE(?fnames, \"[)(]\", \"\"), 'W', 'V') AS ?first_names) }\n    OPTIONAL {\n        ?promotion_id a wsc:Promotion ;\n                    crm:P11_had_participant ?id ;\n                    wacs:hasRank ?promotion_rank_id .\n        ?promotion_rank_id skos:prefLabel ?promotion_rank .\n        OPTIONAL {\n        ?promotion_rank_id dct:isPartOf/skos:prefLabel ?hierarchy_label .\n        }\n    }\n    BIND(CONCAT(\"(^|[ ])\", substr(?etu, 1, 1)) as ?etukirjainre)\n    BIND(CONCAT(\"(^|[ -])\", substr(?keski, 1, 1)) as ?keskikirjainre)\n    BIND(CONCAT(\"(^|[ ])\", ?etu, \"($|[ ])\") AS ?etunimire)\n    BIND(CONCAT(\"(^|[ -])\", ?keski, \"($|[ ])\") AS ?toinennimire)\n    BIND(IF(STRLEN(?keski)=2, ?keskikirjainre, IF(?keski=\"\", \".\", ?toinennimire)) AS ?keskire)\n    BIND(IF(STRLEN(?etu)=2, ?etukirjainre, ?etunimire) AS ?eture)\n    BIND(CONCAT(\"(^|[ ])\", ?etu, \" \", ?keski, \"($|[ ])\") AS ?longrankre)\n    BIND(REGEX(?etu, \"MINISTERI$\") AS ?minister_test)\n    FILTER(IF(?minister_test,\n        EXISTS { ?id wacs:hasType ?person_type . FILTER(?person_type IN (\"Person\", \"PoliticalPerson\")) },TRUE)\n    )\n    BIND((REGEX(?promotion_rank, ?eture, \"i\") || REGEX(?hierarchy_label, ?eture, \"i\")) AS ?rank_test)\n    BIND((REGEX(?promotion_rank, ?longrankre, \"i\") || REGEX(?rank_label, ?longrankre, \"i\")) AS ?long_rank_test)\n    FILTER(\n        IF(STRENDS(?etu, \".\"),\n        REGEX(?first_names, ?etukirjainre) && REGEX(?first_names, ?keskire),\n        (REGEX(?first_names, ?keskire, \"i\") && (REGEX(?first_names, ?eture, \"i\"))) ||\n        IF(?keski != \"\",\n            ?rank_test && REGEX(?first_names, ?keskire, \"i\")\n            || ?long_rank_test || (?minister_test && REGEX(?first_names, ?keskire, \"i\")),\n            ?minister_test || ?rank_test || ?long_rank_test\n        )\n        )\n    )\n    }\n}\n?id foaf:familyName ?family_name .\n?id skos:prefLabel ?plabel .\nOPTIONAL { ?id foaf:firstName ?fnames . BIND(REPLACE(?fnames, \"[)(]\", \"\") AS ?first_names) }\nBIND(CONCAT(?first_names, ' ', ?familyName) AS ?nlabel)\nOPTIONAL {\n    ?promotion_id a wsc:Promotion ;\n                crm:P11_had_participant ?id ;\n                wacs:hasRank ?promotion_rank_id .\n    ?promotion_rank_id skos:prefLabel ?promotion_rank .\n    OPTIONAL {\n    ?promotion_rank_id wacs:level ?rank_lvl .\n    }\n    OPTIONAL {\n    ?promotion_rank_id dct:isPartOf/skos:prefLabel ?hierarchy_label .\n    }\n    OPTIONAL {\n    ?promotion_id crm:P4_has_time-span ?timespan_id .\n    ?timespan_id crm:P82a_begin_of_the_begin ?earliest_promotion_time .\n    ?timespan_id crm:P82b_end_of_the_end ?latest_promotion_time .\n    }\n}\nOPTIONAL {\n    ?id ^crm:P143_joined/crm:P144_joined_with/(^crm:P143_joined/crm:P144_joined_with)? ?unit .\n}\nOPTIONAL {\n    ?death crm:P100_was_death_of ?id .\n    ?death crm:P4_has_time-span/crm:P82b_end_of_the_end ?death_date .\n}\nOPTIONAL {\n    ?id (crm:P70i_is_documented_in|^crm:P70_documents)/cas:kuolinaika ?death_date .\n}\nOPTIONAL {\n    ?id dct:source ?source .\n}\n}",
  "depth" : 2,
  "maxNGrams" : 5
}