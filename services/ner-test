{
  "name" : "ner-test",
  "endpointURL" : "http://ldf.fi/pnr/sparql",
  "lasLocale" : "fi",
  "queryUsingOriginalForm" : true,
  "queryUsingBaseform" : true,
  "queryUsingInflections" : [ ],
  "queryModifyingEveryPart" : true,
  "queryModifyingOnlyLastPart" : true,
  "positiveLASFilters" : {
    "" : [ null ]
  },
  "negativeLASFilters" : {
    "UPOS" : [ "PRON", "VERB", "ADJ", "ADV", "CONJ" ]
  },
  "strongNegativeLASFilters" : {
    "SEM" : [ "MALE", "FEMALE" ],
    "PROPER" : [ "FIRST", "LAST" ]
  },
  "guess" : true,
  "query" : "PREFIX text: <http://jena.apache.org/text#>\nPREFIX geonames: <http://www.geonames.org/ontology#>\nPREFIX pnrs: <http://ldf.fi/pnr-schema#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX wdt: <http://www.wikidata.org/prop/direct/>\nPREFIX wd: <http://www.wikidata.org/entity/>\nSELECT DISTINCT (IRI(REPLACE(STR(?oid),\"/[^/]*/?$\",\"\")) AS ?id) (STR(?olabel) AS ?label) ?ngram {\n  {\n    {\n#      VALUES (?ngram ?allowed) {\n#        (<NGRAMSPLUSALLOWED>)\n#      }\n#      BIND(REPLACE(REPLACE(?ngram,\"[^a-zåäöA-ZÅÄ\\\\- ]\",\"\"),\" (?=[^ ][^ ][^ ])\",\"\") AS ?cngram)\n#      FILTER (!CONTAINS(?cngram,\" \") && STRLEN(?cngram)>1 && UCASE(SUBSTR(?cngram,1,1))=SUBSTR(?cngram,1,1))\n#      BIND(NOT EXISTS {\n#        VALUES ?ngram2 {\n#          <ORIGINALNGRAMS>\n#        }\n#        BIND(REPLACE(?ngram,\"([\\\\.\\\\?\\\\*\\\\+\\\\^\\\\$\\\\[\\\\]\\\\\\\\\\\\(\\\\)\\\\{\\\\}\\\\|\\\\-])\",\"\\\\\\\\$1\") AS ?engram)\n#        FILTER (REGEX(?ngram2,CONCAT(\"[^.] ?[A-ZÅÄÖ]\\\\w* \",?engram)) || REGEX(?ngram2,CONCAT(\"\\\\b[A-ZÅÄÖ]. \",?engram)) || REGEX(?ngram2,CONCAT(\"[^.] ?\",?engram,\",? [A-ZÅÄÖ]\")))\n#      } AS ?allowed2)\n#      BIND(\"\" AS ?fuzzy)\n#      BIND(CONCAT(REPLACE(?cngram,\"([\\\\+\\\\-\\\\&\\\\|\\\\!\\\\(\\\\)\\\\{\\\\}\\\\[\\\\]\\\\^\\\\\\\"\\\\~\\\\*\\\\?\\\\:\\\\/\\\\\\\\])\",\"\\\\\\\\$1\")) AS ?mngram)\n#    } UNION {\n#      VALUES (?ngram ?allowed) {\n      BIND(true AS ?allowed)\n      VALUES (?ngram ?foo) {\n        (<NGRAMSPLUSALLOWED>)\n      }\n      FILTER (STRLEN(?ngram)>1 && UCASE(SUBSTR(?ngram,1,1))=SUBSTR(?ngram,1,1))\n#\t  BIND(NOT EXISTS {\n#        VALUES ?ngram2 {\n#          <ORIGINALNGRAMS>\n#        }\n#        BIND(REPLACE(?ngram,\"([\\\\.\\\\?\\\\*\\\\+\\\\^\\\\$\\\\[\\\\]\\\\\\\\\\\\(\\\\)\\\\{\\\\}\\\\|\\\\-])\",\"\\\\\\\\$1\") AS ?engram)\n#        FILTER (REGEX(?ngram2,CONCAT(\"[^.] ?[A-ZÅÄÖ]\\\\w* \",?engram)) || REGEX(?ngram2,CONCAT(\"\\\\b[A-ZÅÄÖ]. \",?engram)) || REGEX(?ngram2,CONCAT(\"[^.] ?\",?engram,\",? [A-ZÅÄÖ]\")))\n#      } AS ?allowed2)\n      BIND(TRUE AS ?allowed2)\n      BIND(CONCAT(\"\\\"\",REPLACE(?ngram,\"([\\\\+\\\\-\\\\&\\\\|\\\\!\\\\(\\\\)\\\\{\\\\}\\\\[\\\\]\\\\^\\\\\\\"\\\\~\\\\*\\\\?\\\\:\\\\/\\\\\\\\])\",\"\\\\\\\\$1\"),\"\\\"\") AS ?mngram)\n    }\n    ?oid text:query ?mngram .\n    ?oid skos:prefLabel ?olabel .\n    ?oid a ?placeType .\n    FILTER ((?allowed && ?allowed2) || ?placeType=pnrs:place_type_540 || ?placeType=pnrs:place_type_550 || ?placeType=pnrs:place_type_580 || ?placeType=pnrs:place_type_575 || ?placeType=pnrs:SubRegion || ?placeType=pnrs:LargeArea)\n  } UNION {\n    SERVICE <http://ldf.fi/warsa/sparql> {\n\t  {\n#        VALUES ?ngram {\n#          <VALUES>\n#        }\n#      \tBIND(REPLACE(REPLACE(?ngram,\"[^a-zåäöA-ZÅÄ\\\\- ]\",\"\"),\" (?=[^ ][^ ][^ ])\",\"\") AS ?cngram)\n#        FILTER (!CONTAINS(?cngram,\" \") && STRLEN(?cngram)>1 && UCASE(SUBSTR(?cngram,1,1))=SUBSTR(?cngram,1,1))        \n#        FILTER NOT EXISTS {\n#          VALUES ?ngram2 {\n#            <ORIGINALNGRAMS>\n#          }\n#          BIND(REPLACE(?ngram,\"([\\\\.\\\\?\\\\*\\\\+\\\\^\\\\$\\\\[\\\\]\\\\\\\\\\\\(\\\\)\\\\{\\\\}\\\\|\\\\-])\",\"\\\\\\\\$1\") AS ?engram)\n#          FILTER (REGEX(?ngram2,CONCAT(\"[^.] ?[A-ZÅÄÖ]\\\\w* \",?engram)) || REGEX(?ngram2,CONCAT(\"\\\\b[A-ZÅÄÖ]. \",?engram)) || REGEX(?ngram2,CONCAT(\"[^.] ?\",?engram,\",? [A-ZÅÄÖ]\")))\n#        }\n#      \tBIND(\"\" AS ?fuzzy)\n#        BIND(CONCAT(REPLACE(?cngram,\"([\\\\+\\\\-\\\\&\\\\|\\\\!\\\\(\\\\)\\\\{\\\\}\\\\[\\\\]\\\\^\\\\\\\"\\\\~\\\\*\\\\?\\\\:\\\\/\\\\\\\\])\",\"\\\\\\\\$1\"),?fuzzy) AS ?mngram)\n#      } UNION {\n        VALUES ?ngram {\n          <VALUES>\n        }\n        FILTER (STRLEN(?ngram)>1 && UCASE(SUBSTR(?ngram,1,1))=SUBSTR(?ngram,1,1))\n#        FILTER NOT EXISTS {\n#          VALUES ?ngram2 {\n#            <ORIGINALNGRAMS>\n#          }\n#          FILTER (REGEX(?ngram2,CONCAT(\"[^.] ?[A-ZÅÄÖ]\\\\w* \",?ngram)) || REGEX(?ngram2,CONCAT(\"\\\\b[A-ZÅÄÖ]. \",?ngram)) || REGEX(?ngram2,CONCAT(\"[^.] ?\",?ngram,\",? [A-ZÅÄÖ]\")))\n#        }\n        BIND(CONCAT(\"\\\"\",REPLACE(?ngram,\"([\\\\+\\\\-\\\\&\\\\|\\\\!\\\\(\\\\)\\\\{\\\\}\\\\[\\\\]\\\\^\\\\\\\"\\\\~\\\\*\\\\?\\\\:\\\\/\\\\\\\\])\",\"\\\\\\\\$1\"),\"\\\"\") AS ?mngram)\n      }\n      GRAPH <http://ldf.fi/warsa/places/karelian_places> {\n      \t?oid text:query ?mngram .\n      \t?oid skos:prefLabel ?olabel .\n      }\n    }\n  } UNION {\n    SERVICE <http://ldf.fi/hipla/sparql> {\n\t  {\n#        VALUES (?ngram ?allowed) {\n#          (<NGRAMSPLUSALLOWED>)\n#        }\n#      \tBIND(REPLACE(REPLACE(?ngram,\"[^a-zåäöA-ZÅÄ\\\\- ]\",\"\"),\" (?=[^ ][^ ][^ ])\",\"\") AS ?cngram)\n#      \tFILTER (!CONTAINS(?cngram,\" \") && STRLEN(?cngram)>1 && UCASE(SUBSTR(?cngram,1,1))=SUBSTR(?cngram,1,1))\n#      \tBIND(\"\" AS ?fuzzy)\n#        BIND(CONCAT(REPLACE(?cngram,\"([\\\\+\\\\-\\\\&\\\\|\\\\!\\\\(\\\\)\\\\{\\\\}\\\\[\\\\]\\\\^\\\\\\\"\\\\~\\\\*\\\\?\\\\:\\\\/\\\\\\\\])\",\"\\\\\\\\$1\"),?fuzzy) AS ?mngram)\n#      } UNION {\n        VALUES (?ngram ?allowed) {\n          (<NGRAMSPLUSALLOWED>)\n        }\n        FILTER (STRLEN(?ngram)>1 && UCASE(SUBSTR(?ngram,1,1))=SUBSTR(?ngram,1,1))\n        BIND(CONCAT(\"\\\"\",REPLACE(?ngram,\"([\\\\+\\\\-\\\\&\\\\|\\\\!\\\\(\\\\)\\\\{\\\\}\\\\[\\\\]\\\\^\\\\\\\"\\\\~\\\\*\\\\?\\\\:\\\\/\\\\\\\\])\",\"\\\\\\\\$1\"),\"\\\"\") AS ?mngram)\n      }\n      ?oid text:query ?mngram .\n      ?oid skos:prefLabel ?olabel .\n    }\n  } UNION {\n    SERVICE <http://ldf.fi/wikidata-place-names/sparql> {\n      {\n#        VALUES (?ngram ?allowed) {\n#          (<NGRAMSPLUSALLOWED>)\n#        }\n#      \tBIND(REPLACE(REPLACE(?ngram,\"[^a-zåäöA-ZÅÄ\\\\- ]\",\"\"),\" (?=[^ ][^ ][^ ])\",\"\") AS ?cngram)\n#      \tFILTER (!CONTAINS(?cngram,\" \") && STRLEN(?cngram)>1 && UCASE(SUBSTR(?cngram,1,1))=SUBSTR(?cngram,1,1))\n#        BIND(NOT EXISTS {\n#          VALUES ?ngram2 {\n#            <ORIGINALNGRAMS>\n#          }\n#          BIND(REPLACE(?ngram,\"([\\\\.\\\\?\\\\*\\\\+\\\\^\\\\$\\\\[\\\\]\\\\\\\\\\\\(\\\\)\\\\{\\\\}\\\\|\\\\-])\",\"\\\\\\\\$1\") AS ?engram)\n#          FILTER (REGEX(?ngram2,CONCAT(\"[^.] ?[A-ZÅÄÖ]\\\\w* \",?engram)) || REGEX(?ngram2,CONCAT(\"\\\\b[A-ZÅÄÖ]. \",?engram)) || REGEX(?ngram2,CONCAT(\"[^.] ?\",?engram,\",? [A-ZÅÄÖ]\")))\n#        } AS ?allowed2)\n#      \tBIND(\"\" AS ?fuzzy)\n#        BIND(CONCAT(REPLACE(?cngram,\"([\\\\+\\\\-\\\\&\\\\|\\\\!\\\\(\\\\)\\\\{\\\\}\\\\[\\\\]\\\\^\\\\\\\"\\\\~\\\\*\\\\?\\\\:\\\\/\\\\\\\\])\",\"\\\\\\\\$1\"),?fuzzy) AS ?mngram)\n#      } UNION {\n        BIND(true AS ?allowed)\n        VALUES (?ngram ?foo) {\n#        VALUES (?ngram ?allowed) {\n          (<NGRAMSPLUSALLOWED>)\n        }\n        FILTER (STRLEN(?ngram)>1 && UCASE(SUBSTR(?ngram,1,1))=SUBSTR(?ngram,1,1))\n #       BIND(NOT EXISTS {\n #         VALUES ?ngram2 {\n #           <ORIGINALNGRAMS>\n #         }\n #         BIND(REPLACE(?ngram,\"([\\\\.\\\\?\\\\*\\\\+\\\\^\\\\$\\\\[\\\\]\\\\\\\\\\\\(\\\\)\\\\{\\\\}\\\\|\\\\-])\",\"\\\\\\\\$1\") AS ?engram)\n #         FILTER (REGEX(?ngram2,CONCAT(\"[^.] ?[A-ZÅÄÖ]\\\\w* \",?engram)) || REGEX(?ngram2,CONCAT(\"\\\\b[A-ZÅÄÖ]. \",?engram)) || REGEX(?ngram2,CONCAT(\"[^.] ?\",?engram,\",? [A-ZÅÄÖ]\")))\n #       } AS ?allowed2)\n   \t    BIND(true AS ?allowed2)\n        BIND(CONCAT(\"\\\"\",REPLACE(?ngram,\"([\\\\+\\\\-\\\\&\\\\|\\\\!\\\\(\\\\)\\\\{\\\\}\\\\[\\\\]\\\\^\\\\\\\"\\\\~\\\\*\\\\?\\\\:\\\\/\\\\\\\\])\",\"\\\\\\\\$1\"),\"\\\"\") AS ?mngram)\n      }\n      ?oid text:query ?mngram .\n      ?oid skos:prefLabel ?olabel .\n      ?oid wdt:P31 ?placeType .\n      FILTER ((?allowed && ?allowed2) || ?placeType=wd:Q515 || ?placeType=wd:Q1549591 || ?placeType=wd:Q6256)\n    }\n  } UNION {\n    SERVICE <http://ldf.fi/geonames/sparql> {\n      {\n#        VALUES (?ngram ?allowed) {\n#          (<NGRAMSPLUSALLOWED>)\n#        }\n#      \tBIND(REPLACE(REPLACE(?ngram,\"[^a-zåäöA-ZÅÄ\\\\- ]\",\"\"),\" (?=[^ ][^ ][^ ])\",\"\") AS ?cngram)\n#      \tFILTER (!CONTAINS(?cngram,\" \") && STRLEN(?cngram)>1 && UCASE(SUBSTR(?cngram,1,1))=SUBSTR(?cngram,1,1))\n#        BIND(NOT EXISTS {\n#          VALUES ?ngram2 {\n#            <ORIGINALNGRAMS>\n#          }\n#          BIND(REPLACE(?ngram,\"([\\\\.\\\\?\\\\*\\\\+\\\\^\\\\$\\\\[\\\\]\\\\\\\\\\\\(\\\\)\\\\{\\\\}\\\\|\\\\-])\",\"\\\\\\\\$1\") AS ?engram)\n#          FILTER (REGEX(?ngram2,CONCAT(\"[^.] ?[A-ZÅÄÖ]\\\\w* \",?engram)) || REGEX(?ngram2,CONCAT(\"\\\\b[A-ZÅÄÖ]. \",?engram)) || REGEX(?ngram2,CONCAT(\"[^.] ?\",?engram,\",? [A-ZÅÄÖ]\")))\n#        } AS ?allowed2)\n#      \tBIND(\"\" AS ?fuzzy)\n#        BIND(CONCAT(REPLACE(?cngram,\"([\\\\+\\\\-\\\\&\\\\|\\\\!\\\\(\\\\)\\\\{\\\\}\\\\[\\\\]\\\\^\\\\\\\"\\\\~\\\\*\\\\?\\\\:\\\\/\\\\\\\\])\",\"\\\\\\\\$1\"),?fuzzy) AS ?mngram)\n#      } UNION {\n        BIND(true AS ?allowed)\n        VALUES (?ngram ?foo) {        \n#        VALUES (?ngram ?allowed) {\n          (<NGRAMSPLUSALLOWED>)\n        }\n        FILTER (STRLEN(?ngram)>1 && UCASE(SUBSTR(?ngram,1,1))=SUBSTR(?ngram,1,1))\n#        BIND(NOT EXISTS {\n#          VALUES ?ngram2 {\n#            <ORIGINALNGRAMS>\n#          }\n#          BIND(REPLACE(?ngram,\"([\\\\.\\\\?\\\\*\\\\+\\\\^\\\\$\\\\[\\\\]\\\\\\\\\\\\(\\\\)\\\\{\\\\}\\\\|\\\\-])\",\"\\\\\\\\$1\") AS ?engram)\n#          FILTER (REGEX(?ngram2,CONCAT(\"[^.] ?[A-ZÅÄÖ]\\\\w* \",?engram)) || REGEX(?ngram2,CONCAT(\"\\\\b[A-ZÅÄÖ]. \",?engram)) || REGEX(?ngram2,CONCAT(\"[^.] ?\",?engram,\",? [A-ZÅÄÖ]\")))\n#        } AS ?allowed2)\n        BIND(true AS ?allowed2)\n        BIND(CONCAT(\"\\\"\",REPLACE(?ngram,\"([\\\\+\\\\-\\\\&\\\\|\\\\!\\\\(\\\\)\\\\{\\\\}\\\\[\\\\]\\\\^\\\\\\\"\\\\~\\\\*\\\\?\\\\:\\\\/\\\\\\\\])\",\"\\\\\\\\$1\"),\"\\\"\") AS ?mngram)\n      }      \n   \t  ?oid text:query ?mngram .\n      ?oid geonames:featureClass ?fc .\n      ?oid geonames:featureCode ?fco .\n      ?oid geonames:parentCountry ?fcc\n      FILTER (?fco=geonames:PCLH || ?fco=geonames:PCL || ?fco=geonames:ADM1 || ?fco=geonames:ADM1H || ?fco=geonames:PPLC || ?fco=geonames:PPLCH ((?allowed && ?allowed2) && (?fc=geonames:A || ?fcc=<http://sws.geonames.org/660013> || (?fco=geonames:PPLA || ?fco=geonames:PPLA2 || ?fco=geonames:PPLA3|| ?fco=geonames:PPLA4 || ?fco=geonames:PPLG || ?fco=geonames:PPLH || ?fco=geonames:PPLW))))\n  \t  ?oid geonames:name|geonames:alternateName ?olabel .\n    }\n  }\n  FILTER (STRLEN(?olabel)<=STRLEN(?mngram) && STRSTARTS(?olabel,SUBSTR(?ngram,1,2)))\n}",
  "depth" : 1,
  "maxNGrams" : 3
}